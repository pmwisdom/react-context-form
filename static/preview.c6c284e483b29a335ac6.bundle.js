(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(762);t.createForm=r.default},452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={values:{},registerField:function(e){return e},changeFieldValue:function(e,t){return{name:e,value:t}},onBlur:function(){return null},setFormValues:function(e){return e},reset:function(){return null}}},753:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),u=n(107),l=n(119).createForm(),i=l.Form,o=l.Field,s=l.Consumer;u.storiesOf("Form Consumer (Triggering custom actions)",e).add("Consumer",function(){return a.default.createElement(i,null,a.default.createElement(o,{name:"field",initialValue:"Initial Value"}),a.default.createElement(s,null,function(e){var t=e.reset,n=e.setFormValues;return a.default.createElement("div",null,a.default.createElement("button",{onClick:t},"Click me to reset form to initial state"),a.default.createElement("button",{onClick:function(){return n({field:"Custom Value"})}},"Click me to set field manually"))}))})}).call(this,n(51)(e))},754:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),u=n(107),l=n(119).createForm(),i=l.Form,o=l.Field,s=function(e){var t=e.value,n=e.onChange;return a.default.createElement("input",{value:t,onChange:n})};u.storiesOf("Nested Field Values",e).add("Form",function(){return a.default.createElement(i,{onChange:function(e){return console.log("Values changed",e)},onSubmit:function(e){throw console.log("Submitted with",e),new Error("Fail")},onSubmitSuccess:function(e){return console.log("Submitted succesfully with",e)},onSubmitFailure:function(e){return console.error("Submit failed because",e)}},a.default.createElement(o,{name:"hello",initialValue:"hello1"}),a.default.createElement(o,{name:"password",type:"password",initialValue:"hello2"}),a.default.createElement(o,{name:"nested.first",initialValue:"nested.first"}),a.default.createElement(o,{name:"nested.second",type:"password",initialValue:"nested.second"}),a.default.createElement(o,{name:"nested2.first",initialValue:"nested2.first"},function(e){var t=e.value,n=e.onChange;return a.default.createElement("input",{value:t,onChange:n})}),a.default.createElement(o,{name:"nested2.second",initialValue:"nested2.second"},s),a.default.createElement(o,{name:"array[0]",initialValue:"array[0]"},s),a.default.createElement(o,{name:"array[1]",initialValue:"array[1]"},s),a.default.createElement(o,{name:"arraynest[0].nested",initialValue:"arraynest[0].nested"},s),a.default.createElement(o,{name:"arraynest[0].nested2",initialValue:"arraynest[0].nested2"},s),a.default.createElement("button",{type:"submit"}," Submit "))})}).call(this,n(51)(e))},755:function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(n(0)),i=n(107),o=n(119).createForm(),s=o.Form,c=o.Field,f=function(e){return e?void 0:"This is required"},d=function(e){return e.length<5?"Value must be longer than 5 characters":void 0},h=function(e){var t=e.error,n=e.touched,u=a(e,["error","touched"]);return console.log("Error",t,n),l.default.createElement("div",null,l.default.createElement("input",r({},u)),n&&t?l.default.createElement("div",{style:{color:"red"}},t):null)};i.storiesOf("Validation",e).add("validation",function(){return l.default.createElement(s,{onChange:function(e){return console.log("Values changed",e)},onSubmit:function(e){console.log("Submitted with",e)},onSubmitSuccess:function(e){return console.log("Submitted succesfully with",e)},onSubmitFailure:function(e){return console.error("Submit failed because",e)}},l.default.createElement(c,{name:"validation",validators:[f]},h),l.default.createElement(c,{name:"validation-password",validators:[d]},h),l.default.createElement(c,{name:"multiple-validators",validators:[f,d]},h),l.default.createElement("button",{type:"submit"}," Submit "))})}).call(this,n(51)(e))},756:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),u=n(107),l=n(119),i=l.createForm(),o=l.createForm();u.storiesOf("Multiple Forms",e).add("Form",function(){return a.default.createElement("div",null,a.default.createElement("div",null,"Form 1",a.default.createElement(i.Form,null,a.default.createElement(i.Field,{name:"hello"}),a.default.createElement(i.Field,{name:"hello2"}))),a.default.createElement("div",null,"Form 2",a.default.createElement(o.Form,null,a.default.createElement(o.Field,{name:"hello"}),a.default.createElement(o.Field,{name:"hello2"}))))})}).call(this,n(51)(e))},758:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(n(0)),i=n(452),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){var n=t.props,r=n.changeFieldValue,a=n.name;if(e.currentTarget)return r(a,e.currentTarget.value);r(a,e)},t.handleBlur=function(){(0,t.props.onBlur)()},t.handleFocus=function(){},t}return a(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.initialValue,n=e.name,r=e.validators;this.props.register({name:n,initialValue:t,validators:r})},t.prototype.render=function(){var e=this.props,t=e.value,n=e.error,r=e.type,a=e.children,u=e.touched;return i.isFunction(a)?a({value:t,onChange:this.handleChange,onBlur:this.handleBlur,error:n,type:r,touched:u}):l.default.createElement("input",{value:t,type:r,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus})},t.defaultProps={value:"",initialValue:"",type:"text",validators:[]},t}(l.default.Component);t.default=o},760:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(759));t.default=function(e,t,n){return u.default(r({},e),t,n)}},761:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function l(e){try{o(r.next(e))}catch(e){u(e)}}function i(e){try{o(r.throw(e))}catch(e){u(e)}}function o(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(l,i)}o((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,a,u,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(u){return function(i){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=r[2&u[0]?"return":u[0]?"throw":"next"])&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[0,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return l.label++,{value:u[1],done:!1};case 5:l.label++,r=u[1],u=[0];continue;case 7:u=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){l=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){l.label=u[1];break}if(6===u[0]&&l.label<a[1]){l.label=a[1],a=u;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(u);break}a[2]&&l.ops.pop(),l.trys.pop();continue}u=t.call(e,l)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=o(n(453)),f=n(452),d=o(n(760)),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=c.default,t.queue=[],t.isProcessingQueue=!1,t.processQueueFields=function(){var e=t.queue.shift();if(e){var n=e.name,r=e.initialValue,a=e.validators;if(t.state.values[n])throw new Error("Form Field has already been registered with name "+n);t.setState(function(e){var t=e.values;return{values:d.default(t,n,{value:r,initialValue:r,touched:!1,validators:a})}},t.processQueueFields)}else t.isProcessingQueue=!1},t.registerField=function(e){var n=e.name,r=e.initialValue,a=e.validators;t.setState(function(e){var t=e.values;return{values:d.default(t,n,{value:r,initialValue:r,touched:!1,validators:a})}},t.processQueueFields)},t.changeFieldValue=function(e,n){return l(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.setFieldValue({name:e,key:"value",value:n,touched:!0})];case 1:return t.sent(),this.handleChange(),[2]}})})},t.handleChange=function(){var e=t.props.onChange;f.isFunction(e)&&e(t.state.values)},t.handleSubmit=function(e){return l(t,void 0,void 0,function(){var t,n,r,a,u,l,o;return i(this,function(i){switch(i.label){case 0:e.preventDefault(),t=this.state.values,n=this.props,r=n.onSubmit,a=n.onSubmitSuccess,u=n.onSubmitFailure,i.label=1;case 1:return i.trys.push([1,5,,6]),f.isFunction(r)?[4,this.runValidation()]:[3,4];case 2:if(l=i.sent(),Boolean(Object.keys(l).length))throw new Error("[Validation Error]"+JSON.stringify(this.fieldErrors));return[4,r(t)];case 3:i.sent(),i.label=4;case 4:return f.isFunction(a)&&a(t),[3,6];case 5:return o=i.sent(),f.isFunction(u)&&u(o),[3,6];case 6:return[2]}})})},t.handleBlur=function(){t.runValidation()},t.updateFieldError=function(e){var n=e.name,r=e.error;return t.setFieldValue({name:n,value:r,key:"error",touched:!0})},t.reset=function(){return l(t,void 0,void 0,function(){var e,t,n,r,a,u;return i(this,function(l){switch(l.label){case 0:for(e=[],t=this.state.values,n=0,r=Object.keys(t);n<r.length;n++)a=r[n],u=t[a],e.push(this.setFieldValue({name:a,key:"value",value:u.initialValue,touched:!1}));return[4,Promise.all(e)];case 1:return l.sent(),[2]}})})},t.setFormValues=function(e){return l(t,void 0,void 0,function(){var t,n,r,a,u;return i(this,function(l){switch(l.label){case 0:for(t=[],n=0,r=Object.keys(e);n<r.length;n++)a=r[n],u=e[a],t.push(this.setFieldValue({name:a,key:"value",value:u,touched:!1}));return[4,Promise.all(t)];case 1:return l.sent(),[2]}})})},t.setFieldValue=function(e){var n=e.name,r=e.value,a=e.key,l=e.touched;return new Promise(function(e){t.setState(function(e){var t,i=e.values,o=i[n],s=u({},o,((t={})[a]=r,t));return l&&(s.touched=l),{values:d.default(i,""+n,s)}},e)})},t}return a(t,e),t.prototype.componentDidUpdate=function(){console.info("[Form Updated]: ",this.state)},Object.defineProperty(t.prototype,"fieldErrors",{get:function(){var e=this.state.values;return Object.keys(e).reduce(function(t,n){var r,a=e[n].error;return a?u({},t,((r={})[n]=a,r)):t},{})},enumerable:!0,configurable:!0}),t.prototype.runValidation=function(){return l(this,void 0,void 0,function(){var e,t,n,r,a,u,l,o,s;return i(this,function(i){switch(i.label){case 0:for(e=this.state.values,t=[],n=0,r=Object.keys(e);n<r.length;n++)if(a=r[n],(u=e[a]).validators&&u.validators.length){for(l=void 0,o=0;o<u.validators.length&&(s=u.validators[o],!(l=s(u.value)));o++);t.push(this.updateFieldError({name:a,error:l}))}return[4,Promise.all(t)];case 1:return i.sent(),[2,this.fieldErrors]}})})},t.prototype.render=function(){var e=this.props,t=e.provider,n=e.children,r=u({},this.state,{registerField:this.registerField,changeFieldValue:this.changeFieldValue,onBlur:this.handleBlur,reset:this.reset,setFormValues:this.setFormValues});return s.default.createElement(t,{value:r},s.default.createElement("form",{onSubmit:this.handleSubmit},n))},t.defaultProps={onChange:function(){},onSubmit:function(){},onSubmitSuccess:function(){},onSubmitFailure:function(){}},t}(s.default.Component);t.default=h},762:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(0)),l=a(n(453)),i=a(n(761)),o=a(n(758)),s=a(n(757));t.default=function(){var e=u.default.createContext(l.default),t=e.Provider,n=e.Consumer;return{Provider:t,Consumer:n,Form:function(e){return u.default.createElement(i.default,r({},e,{provider:t}))},Field:function(e){return u.default.createElement(n,null,function(t){return u.default.createElement(o.default,r({},t,e,s.default(t,"values."+e.name),{register:t.registerField,name:e.name}))})}}}},763:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),u=n(107),l=n(119).createForm(),i=l.Form,o=l.Field,s=function(e){var t=e.value,n=e.onChange;return a.default.createElement("input",{value:t,onChange:n})};u.storiesOf("Single Form",e).add("Form",function(){return a.default.createElement(i,{onChange:function(e){return console.log("Values changed",e)},onSubmit:function(e){throw console.log("Submitted with",e),new Error("Fail")},onSubmitSuccess:function(e){return console.log("Submitted succesfully with",e)},onSubmitFailure:function(e){return console.error("Submit failed because",e)}},a.default.createElement(o,{name:"hello",initialValue:"hello1"}),a.default.createElement(o,{name:"password",type:"password",initialValue:"hello2"}),a.default.createElement(o,{name:"controlled",initialValue:"hello2"},function(e){var t=e.value,n=e.onChange;return a.default.createElement("input",{value:t,onChange:n})}),a.default.createElement(o,{name:"controlled-2",initialValue:"hello3"},s),a.default.createElement("button",{type:"submit"}," Submit "))}).add("Many Fields",function(){return a.default.createElement(i,null,Array.from({length:200},function(e,t){var n="dupe["+t+"]";return a.default.createElement(o,{name:n,initialValue:n})}))}).add("Throws Error on duplicate fields",function(){return a.default.createElement(i,null,a.default.createElement(o,{name:"dupe"}),a.default.createElement(o,{name:"dupe"}))})}).call(this,n(51)(e))},764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(763),n(756),n(755),n(754),n(753)},783:function(e,t,n){"use strict";n.r(t),function(e){n(0);var t=n(107);Object(t.configure)(function(){n(764)},e)}.call(this,n(459)(e))},785:function(e,t,n){n(371),n(784),e.exports=n(783)}},[[785,1,2]]]);
//# sourceMappingURL=preview.c6c284e483b29a335ac6.bundle.js.map